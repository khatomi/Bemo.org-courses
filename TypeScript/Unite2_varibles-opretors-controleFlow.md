-----

## الوحدة الثانية: المتغيرات، المعاملات، والتحكم في سير الكود

في الوحدة دي، حنتعمق أكتر في كيفية تعريف **المتغيرات**، وكيف نستخدم **المعاملات** عشان نعمل عمليات مختلفة، وكمان كيف نتحكم في **مسار تنفيذ الكود** بتاعنا.

-----

### 1\. تعريف المتغيرات: `let`، `const`، `var`

في الجافاسكريبت (وبالتالي في التايبسكريبت)، عندنا 3 طرق لتعريف المتغيرات. لكن في العصر الحديث، بنركز على `let` و`const` لأنهم بيوفروا تحكم أفضل وبيقللوا من الأخطاء.

  * **`var` (قديم وممكن تتجنبه):**

      * ده كان الطريقة الوحيدة لتعريف المتغيرات قبل ES6 (إصدار 2015 من الجافاسكريبت).
      * مشكلته الأساسية إنه **نطاقه (Scope)** بيكون على مستوى الدالة (`Function Scope`) أو على مستوى عام (`Global Scope`)، وده ممكن يؤدي لمشاكل غير متوقعة (زي الـ "**hoisting**" اللي ممكن يسبب أخطاء).
      * **نصيحة:** يفضل تتجنب استخدام `var` في الكود الحديث.

  * **`let` (للمتغيرات اللي بتتغير قيمتها):**

      * ده الخيار المفضل لتعريف المتغيرات اللي قيمتها ممكن تتغير لاحقًا.
      * نطاقه بيكون على مستوى **الكتلة (Block Scope)**، يعني المتغير بيكون متاح بس داخل الكتلة اللي اتعرف فيها (زي داخل `if statement` أو `for loop`). ده بيخلي الكود أكثر تنظيمًا وأقل عرضة للأخطاء.

    **مثال:**

    ```typescript
    let counter: number = 0;
    counter = 1; // مسموح، لأن قيمته ممكن تتغير

    if (true) {
        let blockScopedVar: string = "أنا داخل الكتلة";
        console.log(blockScopedVar);
    }
    // console.log(blockScopedVar); // هنا حيديك خطأ، لأن المتغير ده ما متاح خارج الكتلة
    ```

  * **`const` (للثوابت اللي قيمتها ما بتتغير):**

      * ده الخيار المفضل لتعريف **الثوابت**، يعني المتغيرات اللي قيمتها ما بتتغير بعد ما تتحدد لأول مرة.
      * نطاقه برضو على مستوى **الكتلة (Block Scope)**.
      * **مهم:** لازم تديه قيمة أول ما تعرفه.

    **مثال:**

    ```typescript
    const PI: number = 3.14159;
    // PI = 3.14; // هنا حيديك خطأ، لأن قيمة الـ const ما بتتغير

    const appName: string = "تطبيق المهام";
    ```

  * **ملخص:**

      * استخدم `const` دائمًا إذا كنت متأكد إن قيمة المتغير ما حتتغير.
      * استخدم `let` إذا كنت عارف إن قيمة المتغير حتتغير لاحقًا.
      * تجنب `var` قدر الإمكان.

-----

### 2\. استنتاج النوع (`Type Inference`) مقابل تحديد النوع (`Explicit Typing`)

التايبسكريبت ذكي شديد، وفي معظم الحالات بيقدر يستنتج نوع المتغير بناءً على القيمة اللي بتديه ليها.

  * **استنتاج النوع (`Type Inference`):**

      * لما تعرف متغير وتديه قيمة مباشرة، التايبسكريبت بيستنتج النوع بتاعه تلقائيًا.
      * ده بيخلي الكود بتاعك أنظف وأقل كتابة.

    **مثال:**

    ```typescript
    let quantity = 5; // التايبسكريبت بيستنتج إن quantity من نوع number
    // quantity = "عشرة"; // هنا حيديك خطأ، لأن التايبسكريبت عرف إن quantity رقم

    let isActive = true; // التايبسكريبت بيستنتج إن isActive من نوع boolean
    let productName = "لابتوب"; // التايبسكريبت بيستنتج إن productName من نوع string
    ```

  * **تحديد النوع (`Explicit Typing`):**

      * دي الطريقة اللي استخدمناها في الوحدة الأولى، إنك تحدد النوع بنفسك صراحةً باستخدام العلامة `:` بعد اسم المتغير.
      * بنستخدمها لما:
          * ما تديه قيمة مبدئية (مثلاً لو حتجي القيمة من دالة تانية).
          * تكون عاوز تكون واضح جدًا بخصوص النوع.
          * تكون عاوز تسمح بقيمتين أو أكثر (`Union Types`، حنتكلم عنها لاحقًا).

    **مثال:**

    ```typescript
    let totalAmount: number; // هنا لازم تحدد النوع، لأنه ما في قيمة مبدئية
    totalAmount = 150.75;

    let statusMessage: string = "قيد المعالجة"; // هنا ممكن تستنتج، لكن التحديد الصريح بيزيد الوضوح
    ```

  * **نصيحة:** استخدم استنتاج النوع لما يكون واضح، واستخدم تحديد النوع الصريح لما تحتاج تكون أكثر دقة أو لما التايبسكريبت ما يقدر يستنتج النوع بنفسه.

-----

### 3\. المعاملات (`Operators`)

المعاملات هي الرموز اللي بنستخدمها عشان نعمل عمليات على القيم والمتغيرات.

  * **المعاملات الحسابية (`Arithmetic Operators`):**

      * `+` (جمع)
      * `-` (طرح)
      * `*` (ضرب)
      * `/` (قسمة)
      * `%` (باقي القسمة - Modulus)
      * `**` (أس - Exponentiation)
      * `++` (زيادة بواحد - Increment)
      * `--` (نقصان بواحد - Decrement)

    **مثال:**

    ```typescript
    let a: number = 10;
    let b: number = 3;

    console.log(a + b); // 13
    console.log(a / b); // 3.333...
    console.log(a % b); // 1 (الباقي من قسمة 10 على 3)

    a++; // a تصبح 11
    ```

  * **معاملات المقارنة (`Comparison Operators`):**

      * بترجع قيمة `boolean` (إما `true` أو `false`).
      * `==` (يساوي القيمة فقط - Loose equality)
      * `===` (يساوي القيمة والنوع - Strict equality) (**مفضل استخدامها دائمًا**)
      * `!=` (لا يساوي القيمة فقط)
      * `!==` (لا يساوي القيمة والنوع) (**مفضل استخدامها دائمًا**)
      * `>` (أكبر من)
      * `<` (أصغر من)
      * `>=` (أكبر من أو يساوي)
      * `<=` (أصغر من أو يساوي)

    **مثال:**

    ```typescript
    let x: number = 5;
    let y: string = "5";

    console.log(x == y);  // true (يقارن القيمة فقط)
    console.log(x === y); // false (يقارن القيمة والنوع)
    console.log(x > 3);   // true
    ```

  * **المعاملات المنطقية (`Logical Operators`):**

      * `&&` (و - AND): ترجع `true` إذا كان الطرفين `true`.
      * `||` (أو - OR): ترجع `true` إذا كان أحد الطرفين `true`.
      * `!` (ليس - NOT): تعكس القيمة المنطقية.

    **مثال:**

    ```typescript
    let isAdult: boolean = true;
    let hasTicket: boolean = false;

    console.log(isAdult && hasTicket); // false
    console.log(isAdult || hasTicket); // true
    console.log(!isAdult); // false
    ```

  * **معاملات الإسناد (`Assignment Operators`):**

      * `=` (إسناد قيمة)
      * `+=` (جمع وإسناد: `x += y` هي نفسها `x = x + y`)
      * `-=` (طرح وإسناد)
      * `*=` (ضرب وإسناد)
      * `/=` (قسمة وإسناد)
      * وغيرها...

    **مثال:**

    ```typescript
    let total: number = 100;
    total += 50; // total تصبح 150
    console.log(total);
    ```

-----

### 4\. التحكم في سير الكود (`Control Flow`)

دي الهياكل اللي بتخلي الكود بتاعك يتخذ قرارات أو يكرر عمليات معينة.

  * **`if`/`else if`/`else` (إذا / وإلا إذا / وإلا):**

      * لتنفيذ كود معين بناءً على شرط.

    **مثال:**

    ```typescript
    let temperature: number = 25;

    if (temperature > 30) {
        console.log("الجو حار شديد!");
    } else if (temperature > 20) {
        console.log("الجو لطيف.");
    } else {
        console.log("الجو بارد.");
    }
    ```

  * **`switch` (تبديل):**

      * بديل لـ `if`/`else if` لما يكون عندك حالات متعددة بناءً على قيمة واحدة.
      * **مهم:** لازم تستخدم `break;` عشان توقف التنفيذ بعد كل `case`.

    **مثال:**

    ```typescript
    let dayOfWeek: number = 3; // 1 = الأحد, 2 = الإثنين, وهكذا

    switch (dayOfWeek) {
        case 1:
            console.log("اليوم الأحد");
            break;
        case 2:
            console.log("اليوم الإثنين");
            break;
        case 3:
            console.log("اليوم الثلاثاء");
            break;
        default:
            console.log("يوم غير معروف");
            break;
    }
    ```

  * **حلقات `for` (`For Loops`):**

      * لتكرار كتلة من الكود عدد معين من المرات.

    **مثال:**

    ```typescript
    for (let i: number = 0; i < 5; i++) {
        console.log("العدد:", i);
    }
    // حيطبع: 0, 1, 2, 3, 4
    ```

  * **`for...of` (للتكرار على عناصر المصفوفات):**

    ```typescript
    let fruits: string[] = ["تفاح", "موز", "برتقال"];

    for (let fruit of fruits) {
        console.log("فاكهة:", fruit);
    }
    ```

  * **`for...in` (للتكرار على خصائص الكائنات - Objects):**

    ```typescript
    let person = { name: "علي", age: 25 };

    for (let key in person) {
        console.log(`${key}: ${person[key]}`);
    }
    // حيطبع: name: علي, age: 25
    ```

  * **حلقات `while` (`While Loops`):**

      * لتكرار كتلة من الكود طالما شرط معين صحيح.

    **مثال:**

    ```typescript
    let count: number = 0;

    while (count < 3) {
        console.log("العد:", count);
        count++;
    }
    // حيطبع: 0, 1, 2
    ```

  * **حلقات `do...while`:**

      * بتشبه `while`، لكن بتنفذ الكود مرة واحدة على الأقل قبل ما تفحص الشرط.

    **مثال:**

    ```typescript
    let i: number = 0;

    do {
        console.log("أنا أتنفذت مرة واحدة على الأقل:", i);
        i++;
    } while (i < 0); // الشرط ده خطأ، لكن الدالة حتتنفذ مرة واحدة
    ```

-----

### تمرين عملي:

1.  اعمل ملف جديد سميه `controlFlow.ts`.
2.  عرف متغيرين `num1` و`num2` من نوع `number` واديهم قيم.
3.  استخدم معاملات حسابية مختلفة واطبع النتائج.
4.  استخدم `if`/`else if`/`else` عشان تطبع رسالة بناءً على مقارنة بين `num1` و`num2` (مثلاً، إذا `num1` أكبر، إذا `num2` أكبر، أو إذا متساويين).
5.  اعمل حلقة `for` تطبع الأرقام من 1 لـ 10.
6.  اعمل حلقة `while` تطبع الأرقام الزوجية من 0 لـ 10.
7.  حاول تعمل خطأ في الأنواع (مثلاً، تدّي `number` لـ `string`) وشوف كيف التايبسكريبت بيديك تحذير.
8.  بعد ما تخلص، اعمل `tsc controlFlow.ts` في الـ `Terminal`، وبعدين `node controlFlow.ts` عشان تشوف النتائج.




### التنقل:

 [الرجوع إلى الفهرس](./introduction.md)

 [التالي: الوحدة 2 - المتغيرات والتحكم في سير الكود](./Unite2_varibles-opretors-controleFlow.md)
 
 [`السابق : الاساسيات وتجهيز بيئة العمل`](/TypeScript/Unit1_IntroductiontoTypeScriptandSetup.md)